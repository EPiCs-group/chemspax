<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Installation &mdash; ChemSpaX  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="chemspax" href="apidoc/modules.html" />
    <link rel="prev" title="Welcome to ChemSpaX’s documentation!" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> ChemSpaX
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="#usage">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="#indicating-functionalization-sites">Indicating functionalization sites</a></li>
<li class="toctree-l1"><a class="reference internal" href="#optional-adding-new-substituent-to-the-substituent-library">(optional) Adding new substituent to the substituent library</a></li>
<li class="toctree-l1"><a class="reference internal" href="#contents">Contents</a></li>
<li class="toctree-l1"><a class="reference internal" href="#citation">Citation</a></li>
<li class="toctree-l1"><a class="reference internal" href="apidoc/modules.html">chemspax</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ChemSpaX</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Installation</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/README.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <p><img alt="logo" src="_images/logo.png" />
ChemSpaX can be used for local chemical space exploration of any structure. This is done by placing substuents on a skeleton.
A substituent can be chosen from an existing library and can be attached to the skeleton.</p>
<section id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this heading"></a></h1>
<p>Python 3.6.0 or higher is recommended.<br />
It is recommended to use a virtual environment. Anaconda can be used to manage virtual environments (<strong>using Anaconda allows the user to skip
compilation of openbabel from source</strong>):<br />
Download the latest installer from
<a class="reference external" href="https://www.anaconda.com/products/individual">Anaconda’s website</a>
(Or load the Anaconda/Miniconda module if working on a supercomputer).
For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">wget</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">repo</span><span class="o">.</span><span class="n">anaconda</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">archive</span><span class="o">/</span><span class="n">Anaconda3</span><span class="o">-</span><span class="mf">2020.07</span><span class="o">-</span><span class="n">Linux</span><span class="o">-</span><span class="n">x86_64</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>Then run the installation script with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">bash</span> <span class="n">Anaconda3</span><span class="o">-</span><span class="mf">2020.07</span><span class="o">-</span><span class="n">Linux</span><span class="o">-</span><span class="n">x86_64</span><span class="o">.</span><span class="n">sh</span>  
</pre></div>
</div>
<p>The installation is pretty self explanatory, afterwards the following commands can be used to
create a virtual environment and activate it.<br />
The environment will be named ‘chemspax’, the conda_env.yml file can be changed if a different name is required.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">env</span> <span class="n">create</span> <span class="o">-</span><span class="n">f</span> <span class="n">conda_env</span><span class="o">.</span><span class="n">yml</span>

<span class="n">conda</span> <span class="n">activate</span> <span class="n">chemspax</span>
</pre></div>
</div>
<p>Check if the environment is installed correctly by running</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">env</span> <span class="nb">list</span>
</pre></div>
</div>
<p>More information on virtual environments can be found at the
<a class="reference external" href="https://docs.python.org/3/library/venv.html">venv homepage</a> or
<a class="reference external" href="https://uoa-eresearch.github.io/eresearch-cookbook/recipe/2014/11/20/conda/">this Anaconda cheatsheet</a></p>
<p>Now the repository can be cloned with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">EPiCs</span><span class="o">-</span><span class="n">group</span><span class="o">/</span><span class="n">chemspax</span>
</pre></div>
</div>
<p>This will create a folder called chemspax in the current directory.
ChemSpaX can be installed by running the following command in the ChemSpaX folder:</p>
<p><code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-e</span> <span class="pre">.</span></code></p>
<p>This will install the dependencies and the package itself in the chemspax conda environment.</p>
</section>
<section id="usage">
<h1>Usage<a class="headerlink" href="#usage" title="Permalink to this heading"></a></h1>
<p>The main funcion and Python file are used to place functional groups. The user needs to provide an MDL Molfile (.mol)
and xyz file for the skeleton on which functional groups need to be placed. If only a .mol file is present, ChemSpaX’
data_preperation functionality can take care of file conversions. <strong>Before running ChemSpaX, the functionalization sites
need to be indicated, this is discussed in <span class="xref myst">the next section</span>.</strong></p>
<p>ChemSpaX can be used as a commandline utility. By default, skeletons should be placed in the chemspax/skeleton/ folder
and functionalized complexes will be placed in
chemspax/substituents_xyz/automatically_generated/ folder. If no substituents (or not enough, based on the amount of functionalization sites)
are provided, ChemSpaX will add random C-based substituents to place on the skeleton. This can be invoked by running:</p>
<p><code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">main.py</span></code></p>
<p>Available flags:</p>
<ul class="simple">
<li><p><strong>-s or –substituents</strong> indicate which substituents from the library to place on the skeleton’s indicated functionalization sites.
Example: <code class="docutils literal notranslate"><span class="pre">-s</span> <span class="pre">CH3</span></code></p></li>
<li><p><strong>-k or –skeleton</strong> non-default path to folder containing skeleton .xyz and .mol files</p></li>
<li><p><strong>-o or –output</strong> non-default path to place functionalized structures</p></li>
<li><p><strong>-pd or –prepare</strong> convert .mol files to .xyz and vice-versa in the indicated skeletons’ folder and in the substituent library
(chemspax/substituents_xyz/manually_generated/)</p></li>
</ul>
<p>The flags will be discussed in more detail below.</p>
<p>To specify the substituents that should be added, use the -s or –substituents option. This example will add 2 CH3
substituents to the indicated functionalization sites on the skeleton. (if more sites are indicated than substituents,
ChemSpaX will add random C-based substituents from the substituent library)</p>
<p><code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">main.py</span> <span class="pre">-s</span> <span class="pre">CH3</span> <span class="pre">-s</span> <span class="pre">CH3</span></code></p>
<p>For skeleton structures, both a .xyz and .mol file should be present. This conversion can be done using the openbabel
backend of ChemSpaX. Additionally, the substituent library contained in chemspax/substituents_xyz/manually_generated/
is updated. The -pd flag can be added to invoke this functionality. Make sure to check the newly generated skeletons and substituents.</p>
<p><code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">main.py</span> <span class="pre">-pd</span></code></p>
<p>The chemspax/ folder is used as working directory by default, but ChemSpaX can be used in other directories by
supplying a CHEMSPAX_HOME_DIR environment variable. This method expects a skeletons/ folder in this directory with .mol and
.xyz files of the skeletons to be functionalized. On linux systems this method works in the following way:</p>
<div class="highlight-commandline notranslate"><div class="highlight"><pre><span></span>export CHEMSPAX_HOME_DIR=&quot;&lt;your/path&gt;&quot; # The path in which a skeletons/ folder with skeleton&#39;s .mol and .xyz files is present 
python main.py -s CH3 -s CH3
</pre></div>
</div>
<p>To change the folder in which skeletons can be found, use the -k flag. For example:</p>
<div class="highlight-commandline notranslate"><div class="highlight"><pre><span></span>export CHEMSPAX_HOME_DIR=&quot;&lt;your/path&gt;&quot;
python main.py -s CH3 -s CH3 -k &lt;your/other/skeleton/path&gt;
</pre></div>
</div>
<p>To change the folder to which functionalized skeletons are written, use the -o flag. For example:</p>
<div class="highlight-commandline notranslate"><div class="highlight"><pre><span></span>export CHEMSPAX_HOME_DIR=&quot;&lt;your/path&gt;&quot;
python main.py -s CH3 -s CH3 -k &lt;your/other/skeleton/path&gt; -o &lt;your/output/path&gt;
</pre></div>
</div>
<p>ChemSpaX can also be used in other Python scripts. To iterate over skeletons and functionalize them on two sites with CH3’s:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">chemspax.main</span> <span class="kn">import</span> <span class="n">main</span>

<span class="n">current_directory</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>


<span class="n">path_to_substituents</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">current_directory</span><span class="p">,</span> <span class="s2">&quot;substituents_xyz&quot;</span><span class="p">,</span> <span class="s2">&quot;manually_generated/&quot;</span><span class="p">)</span>  <span class="c1"># should always point to the chemspax/substituents_xyz/manually_generated folder</span>
<span class="n">path_to_database</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path_to_substituents</span><span class="p">,</span> <span class="s2">&quot;central_atom_centroid_database.csv&quot;</span><span class="p">)</span>

<span class="n">substituent_list</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;CH3&quot;</span><span class="p">,</span> <span class="s2">&quot;CH3&quot;</span><span class="p">]</span>
<span class="n">skeleton_list</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">chemspax_working_directory</span><span class="p">,</span> <span class="s2">&quot;skeletons&quot;</span><span class="p">,</span> <span class="s2">&quot;*.xyz&quot;</span><span class="p">))</span>
<span class="n">path_to_skeletons</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">current_directory</span><span class="p">,</span> <span class="s2">&quot;skeletons&quot;</span><span class="p">)</span>
<span class="n">working_directory</span> <span class="o">=</span> <span class="n">current_directory</span>
<span class="n">path_to_output</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">current_directory</span><span class="p">,</span> <span class="s2">&quot;substituents_xyz&quot;</span><span class="p">,</span> <span class="s2">&quot;automatically_generated&quot;</span><span class="p">)</span>
<span class="n">main</span><span class="p">(</span><span class="n">skeleton_list</span><span class="p">,</span> <span class="n">substituent_list</span><span class="p">,</span> <span class="n">path_to_database</span><span class="p">,</span> <span class="n">path_to_substituents</span><span class="p">,</span> <span class="n">path_to_skeletons</span><span class="p">,</span> <span class="n">working_directory</span><span class="p">,</span> <span class="n">path_to_output</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="indicating-functionalization-sites">
<h1>Indicating functionalization sites<a class="headerlink" href="#indicating-functionalization-sites" title="Permalink to this heading"></a></h1>
<p>There are 2 options to indicate functionalization sites:</p>
<ol class="arabic simple">
<li><p>Indicate no functionalization_list in the comment line of the .xyz or .mol file of the skeleton that will be functionalized.
In this case, dummy molecules (currently all H’s of the skeleton’s structure) will be used as functionalization sites.</p></li>
<li><p>Indicate a functionalization_list using the index of the atoms to be replaced. Preparing this list is explained below.</p></li>
</ol>
<p>First, we need to prepare the xyz file of the skeleton to which we want to attach a substituent.
An example .xyz file of a skeleton in the skeletons/ folder looks like this:
<img alt="example" src="_images/example_functionalization_list.jpg" /></p>
<p>In the functionalization_list each item is a functionalization. In the example figure shown below,
4 functionalizations are done.<br />
The first item of each list (red circle) is the index of the atom_to_be_functionalized (the atom that will
be replaced by the substituent).</p>
<p><strong>Since commit <a class="reference external" href="https://github.com/EPiCs-group/chemspax/commit/bf59491b619c5064c1314848e2d4d8eb31e7d71d">bf59491</a> all hydrogens are functionalized (used as atom_to_be_functionalized)
if no functionalization_list is given in the skeleton’s xyz file (second line is empty). This preparation step can thus be skipped if
the whole structure needs to be functionalized instead of specific indices.</strong></p>
<p>Note that index 0 is the <strong>first atom in the xyz file</strong>.
In the example figure above, the index of Ru = 0.<br />
<img alt="example" src="_images/example_atom_to_be_functionalized.jpg" /></p>
<p>The second item of each list (green circle) is the index of the bonded_atom, this is the
skeleton’s atom that will be bonded to the substituent.</p>
<p><img alt="example" src="_images/example_bonded_atom.jpg" /></p>
<p>With these instructions the user should be able to
write the functionalization_list of the skeletons correctly to
the skeleton’s xyz file and this skeleton’s xyz file should be
moved to the  skeletons/ folder (<strong>note: there should be no newline at the end of the xyz file!</strong>).</p>
</section>
<section id="optional-adding-new-substituent-to-the-substituent-library">
<h1>(optional) Adding new substituent to the substituent library<a class="headerlink" href="#optional-adding-new-substituent-to-the-substituent-library" title="Permalink to this heading"></a></h1>
<p>I’ll take the example of methyl (which is already in the substituents_xyz/manually_generated folder):</p>
<ul class="simple">
<li><p>Take an xyz file for (optimized) CH4, then remove one of the hydrogens, this is where the substituent will form a bond with the skeleton.</p></li>
<li><p>Let the C (central atom of the
substituent) be the first atom in the list of atoms in the xyz file. (by moving C to the third line of the xyz file)</p></li>
<li><p>Save the CH3.xyz file in substituents_xyz/manually_generated</p></li>
<li><p>Run ChemSpaX with the -pd or –prepare flag to be able to use the new substituent.</p></li>
<li><p>Use ChemSpaX to functionalize the skeleton with the new substituent. Example:<br />
<code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">main.py</span> <span class="pre">-s</span> <span class="pre">CH3</span></code></p></li>
</ul>
<p>data_preparation.py is used to add the central atom and centroid vector per substituent to a .csv file
as these will be used to align the substituent with the skeleton. This script also manages to conversion between .mol and .xyz files.
Note that it is recommended to provide .mol files when available, since these provide correct connectivity data for a structure.
<strong>data_preparation.py assumes that the central atom of the substituent (C in the case of CH3) is the first atom in the
.xyz file of the substituent and that the central atom of the substituent
has a free electron pair such that a new bond can be formed!</strong></p>
<p>An example of the .csv file with information for each substituent
as generated by data_preparation.py is shown below:
<img alt="example" src="_images/example_csv_database.jpg" /></p>
<p>After correct preparation of the xyz/mol files for the skeleton and
(new) substituents and running data_preparation.py as explained above the main function of ChemSpaX can be used.</p>
</section>
<section id="contents">
<h1>Contents<a class="headerlink" href="#contents" title="Permalink to this heading"></a></h1>
<p><strong>skeletons/</strong></p>
<ul class="simple">
<li><p>contains .xyz and .mol files of skeletons to be functionalized.</p></li>
</ul>
<p><strong>substituents_xyz/</strong></p>
<ul class="simple">
<li><p>contains .xyz files for substituents and functionalized skeletons</p>
<ul>
<li><p>automatically_generated/: Default output path of functionalized skeletons by attach_substituent.py.</p></li>
<li><p>manually_generated/: Substituent library.</p></li>
</ul>
</li>
</ul>
</section>
<section id="citation">
<h1>Citation<a class="headerlink" href="#citation" title="Permalink to this heading"></a></h1>
<p>If you use ChemSpaX, please cite:</p>
<div class="csl-entry">Kalikadien, A. V, Pidko, E. A., &#38; Sinha, V. (2022). ChemSpaX: Exploration of chemical space by automated functionalization of molecular scaffold. <i>Digital Discovery</i>. <a href="https://doi.org/10.1039/D1DD00017A">https://doi.org/10.1039/D1DD00017A</a></div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome to ChemSpaX’s documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="apidoc/modules.html" class="btn btn-neutral float-right" title="chemspax" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, A.V. Kalikadien, V. Sinha.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>